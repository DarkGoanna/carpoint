const burger=document.querySelector(".header__burger"),menu=document.querySelector(".menu"),html=document.querySelector("html");burger.addEventListener("click",()=>{burger.classList.toggle("open"),menu.classList.toggle("open"),html.classList.toggle("scroll-off")});const desktopBreakpoint=1e3;window.addEventListener("resize",()=>{window.innerWidth>1e3&&(burger.classList.remove("open"),menu.classList.remove("open"),html.classList.remove("scroll-off"))});const header=document.querySelector(".header"),headerRow_1=document.querySelector(".header__row_1"),headerRow_2=document.querySelector(".header__row_2");function fixHeaderHeight(){header.nextElementSibling.style.paddingTop=header.clientHeight+"px"}window.addEventListener("load",fixHeaderHeight);let prevScrollPosition=window.pageYOffset;const headerHeight=headerRow_1.offsetHeight;function isApple(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}window.onscroll=function(){const e=window.pageYOffset;header.style.top=prevScrollPosition>e?"0":`-${headerHeight}px`,prevScrollPosition=e},window.addEventListener("resize",fixHeaderHeight),window.addEventListener("load",()=>{isApple()&&document.querySelector("html").classList.add("ios")}),document.querySelector(".banner")&&new Swiper(".banner",{speed:1e3,loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".banner .swiper-pagination",clickable:!0},navigation:{nextEl:".banner .swiper-button-next",prevEl:".banner .swiper-button-prev"}});const stepsCards=document.querySelectorAll(".steps__card");stepsCards.length&&stepsCards.forEach(e=>{e.addEventListener("click",()=>{stepsCards.forEach(e=>{e.querySelector(".steps__popup").classList.remove("open")}),e.querySelector(".steps__popup").classList.add("open"),html.classList.add("scroll-off")})});const popups=document.querySelectorAll(".popup");function initVideos(){for(let t=$("iframe"),s=0;s<t.length;s++)if(-1===t[s].src.indexOf("enablejsapi")){var e=-1===t[s].src.indexOf("?")?"?":"&amp;";t[s].src+=e+"enablejsapi=true"}}function enableVideo(e){const t=document.querySelector(e);t&&t.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("pause")){t.classList.remove("pause");const e=t.nextElementSibling;e.setAttribute("src",t.getAttribute("data-src")),initVideos(),e.addEventListener("load",()=>{e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")})}})}popups.length&&popups.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let s=!1;if((t.target.classList.contains("popup__wrapper")||t.target.classList.contains("popup__close"))&&(s=!0),s&&(e.classList.remove("open"),html.classList.remove("scroll-off"),"video-popup"===e.getAttribute("id"))){const t=e.querySelector("iframe");t.previousElementSibling.classList.add("pause"),t.previousElementSibling.setAttribute("data-src","https://www.youtube.com/embed/"),t.previousElementSibling.style.backgroundImage="",t.setAttribute("src",""),t.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}})}),enableVideo(".player");const popupCallers=document.querySelectorAll(".call-popup");if(popupCallers.length&&popupCallers.forEach(e=>{const t=e.getAttribute("data-popupName"),s=document.querySelector("#"+t);e.addEventListener("click",()=>{s.classList.add("open")})}),window.addEventListener("load",()=>{document.querySelector('button[data-tab="tab-1"]').classList.add("active"),document.querySelector("#tab-1").classList.add("active")}),document.querySelectorAll(".price__tab").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".price-card").forEach(e=>{e.classList.remove("active")}),document.querySelectorAll(".price__tab").forEach(e=>{e.classList.remove("active")});let t=e.getAttribute("data-tab");e.classList.add("active"),document.querySelector("#"+t).classList.add("active")})}),document.querySelectorAll(".reviews__tab").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".reviews__content").forEach(e=>{e.classList.remove("active")}),document.querySelectorAll(".reviews__tab").forEach(e=>{e.classList.remove("active")});let t=e.getAttribute("data-tab");e.classList.add("active"),document.querySelector("#"+t).classList.add("active")})}),document.querySelector(".seo")){const e="Свернуть",t="Подробнее",s=document.querySelector(".seo__text");if(s.offsetHeight>Number.parseInt(s.style.getPropertyValue("--height"))){s.parentElement.insertAdjacentHTML("beforeend",'<button type="button" class="seo__btn"></button>');const o=document.querySelector(".seo__btn");s.classList.add("less"),o.textContent=t,o.addEventListener("click",()=>{s.classList.toggle("less"),o.textContent=s.classList.contains("less")?t:e})}}const modelsSlider=document.querySelector(".models__slider");function getPlaylist(e,t=10){const s=[];return fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,id&order=date&key=AIzaSyDWQ9VHKbmvicDUzePMB9pRT9RxotohyQ0&playlistId=${e}&maxResults=${t}`).then(e=>e.json()).then(e=>e.items.forEach(e=>{s.push({thumbnails:e.snippet.thumbnails.standard.url,date:e.snippet.publishedAt,title:e.snippet.title,description:e.snippet.description,id:e.snippet.resourceId.videoId})})).catch(e=>console.log(e)),s}function youtubeParser(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!=t[7].length)&&t[7]}modelsSlider&&new Swiper(".models__slider",{speed:1e3,loop:!0,spaceBetween:30,autoplay:{delay:1e3},breakpoints:{320:{slidesPerView:2,centeredSlides:!0},401:{slidesPerView:3},581:{slidesPerView:4},769:{slidesPerView:6},1201:{slidesPerView:8}}}),document.querySelectorAll(".add-video-card").forEach(e=>{let t,s=getPlaylist(e.getAttribute("data-playlistID"),+e.getAttribute("data-quantity"));setTimeout(()=>{s.forEach(s=>{t=e.classList.contains("reviews-youtube__slider-inner")?`<div class="swiper-slide">\n                            <div class="video-card call-popup" data-popupName="video-popup" data-videoID="${s.id}">\n                                <picture class="video-card__image">\n                                    <img src="${s.thumbnails}" alt="${s.title}">\n                                </picture>\n                                <div class="video-card__title title-3">${s.title}</div>\n                            </div>\n                        </div>`:`<div class="video-card call-popup" data-popupName="video-popup" data-videoID="${s.id}">\n                            <picture class="video-card__image">\n                                <img src="${s.thumbnails}" alt="${s.title}">\n                            </picture>\n                            <div class="video-card__title title-3">${s.title}</div>\n                        </div>`,e.insertAdjacentHTML("beforeend",t)});const o=document.querySelectorAll(".add-video-card .call-popup");o.length&&o.forEach(e=>{const t=e.getAttribute("data-popupName"),s=document.querySelector("#"+t);e.addEventListener("click",()=>{if(s.classList.add("open"),html.classList.add("scroll-off"),"video-popup"===s.getAttribute("id")){const t=e.getAttribute("data-videoID"),o="https://www.youtube.com/embed/"+t,i=`https://i.ytimg.com/vi/${t}/hqdefault.jpg`,r=e.querySelector(".video-card__title").textContent;s.querySelector(".player").setAttribute("data-src",o),s.querySelector(".player").style.backgroundImage=`url(${i})`,s.querySelector(".popup__title").textContent=r,enableVideo("#video-popup .player")}})});document.querySelector(".reviews-youtube__slider")&&new Swiper(".reviews-youtube__slider",{loop:!0,spaceBetween:30,slidesPerView:3,breakpoints:{320:{slidesPerView:1},581:{slidesPerView:2},769:{slidesPerView:3},1e3:{slidesPerView:2},1200:{slidesPerView:3}}})},500)});const simpleBlock=document.querySelector(".simple-block__player-wrapper");if(simpleBlock){const e=simpleBlock.querySelector(".player"),t=youtubeParser(e.getAttribute("data-url")),s=`https://i.ytimg.com/vi/${t}/hqdefault.jpg`,o="https://www.youtube.com/embed/"+t;e.setAttribute("data-src",o),e.style.backgroundImage=`url(${s})`}